<div  *ngIf="invoice.items.length > 0" #invoiceContent class="invoice-wrapper">
  <div class="company-info">
    <h1>{{ company.name }}</h1>
    <p>{{ company.tagline }}</p>
    <div class="contact">
      <p>{{ company.address }}</p>
      <p>Tel: {{ company.phone }} | Email: {{ company.email }}</p>
      <p>GSTIN: {{ company.gstin }}</p>
    </div>
  </div>

  <div class="invoice-title">
    <h2>TAX INVOICE</h2>
    <p class="original">ORIGINAL FOR RECIPIENT</p>
  </div>

  <div class="details">
    <div class="left-details">
      <p><strong>M/S:</strong> {{ customer.name }}</p>
      <p><strong>Address:</strong> {{ customer.address }}</p>
      <p><strong>Phone:</strong> {{ customer.phone }}</p>
    </div>
    <div class="right-details">
      <p><strong>Invoice No:</strong> {{ invoice.invoiceNo }}</p>
      <p><strong>Invoice Date:</strong> {{ invoice.invoiceDate }}</p>
    </div>
  </div>

  <table class="product-table">
  <thead>
    <tr>
      <th>#</th>
      <th>Name of Product(s)</th>
      <th>Qty</th>
      <th>Rate</th>
      <th>Total</th>
    </tr>
  </thead>

  <tbody>
    <ng-container *ngFor="let group of paginatedItems; let pageIndex = index">
  <ng-container *ngFor="let item of group; let i = index">
    <tr>
      <td>{{ pageIndex * pageSize + i + 1 }}</td>
      <td>{{ item.name }}</td>
      <td>{{ item.qty }}</td>
      <td class="text-alg">{{ item.rate | currency:'INR':'symbol':'1.2-2' }}</td>
      <td class="text-alg">{{ item.total | currency:'INR':'symbol':'1.2-2' }}</td>
    </tr>
  </ng-container>

  <!-- Page Total after each group -->
  <tr>
    <td colspan="4" class="text-right"><strong>Page Total ({{ pageIndex + 1 }})</strong></td>
    <td  class="text-alg">
      <strong>{{ getPageTotal(group) | currency:'INR':'symbol':'1.2-2' }}</strong>
    </td>
  </tr>

  <!-- Optional: Page break -->
  <tr class="page-break"></tr>
</ng-container>
  </tbody>

  <tfoot>
    <tr>
      <td colspan="3"><strong>Total</strong></td>
      <td></td>
      <td class="text-alg"><strong>{{ invoice.totalAmount | currency:'INR':'symbol':'1.2-2' }}</strong></td>
    </tr>
  </tfoot>
</table>


  <div class="in-words">
    <p><strong>Total in words:</strong> {{ invoice.amountInWords }}</p>
  </div>

  <div class="bank-section">
    <h3>Bank Details</h3>
    <p><strong>Bank Name:</strong> {{ bank.name }}</p>
    <p><strong>Branch Name:</strong> {{ bank.branch }}</p>
    <p><strong>Bank Account Number:</strong> {{ bank.accountNumber }}</p>
    <p><strong>Bank Branch IFSC:</strong> {{ bank.ifsc }}</p>
  </div>

  <div class="signature-block">
    <p><strong>Total Amount After Tax:</strong> â‚¹ {{ invoice.totalAmount | number:'1.2-2' }}</p>
    <p>For {{ company.name }}</p>
    <p><em>This is computer generated invoice no signature required.</em></p>
  </div>
</div>